
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Milestone\_3}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{CS 109A}\label{cs-109a}

\subsection{Milestone 3}\label{milestone-3}

\subsubsection{Colleen Driscoll, Oliver Mayor and Pooja
Tyagi}\label{colleen-driscoll-oliver-mayor-and-pooja-tyagi}

\subsubsection{28 November 2018}\label{november-2018}

    \subsection{Progress Summary}\label{progress-summary}

In Milestone 3, we present the results of exploratory data analysis with
respect to U.S. House of Representative elections since 1990, dependent
on data availability.

Because results for the 2018 election are not yet finalized
(\href{https://www.cnn.com/2018/11/28/politics/why-california-is-still-counting-ballots/index.html}{some
districts have not yet finished counting}), we report base model results
to 'predict' the results of the 2016 election.

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\subsubsection{Research Question: Which candidates will be elected to
the U.S. House of Representatives in
2018?}\label{research-question-which-candidates-will-be-elected-to-the-u.s.-house-of-representatives-in-2018}

To address this question, the team has accumulated economic, social, and
political data on U.S. Congressional Districts and the representatives
elected from them. To train accurate models, this data has been
collected for the past several decades, based on what is readily
available.

\subsubsection{Data Summary}\label{data-summary}

\textbf{Political Outcomes}

\begin{itemize}
\tightlist
\item
  As our main outcome of interest, we aim to predict which candidate
  will win the election for each of the 435 races for Congress.
  Simplifying this, without loss of generality, we model whether the
  \emph{Democratic} candidate in each district will win; additionally,
  the two-party nature of politics allows us to operationalize the
  binary outcome as one where we predict that the Democrat candidate
  will win the election if her odds of winning are greater than those of
  the Republican candidate (that is, if the log-odds is greater than
  zero). In training datasets, if the Democratic proportion of the
  two-party vote is greater than 0.5, then the Democrat candidate wins.
  (Note: There have been a handful of independent members of the House
  of Representatives of 435 {[}no more than two per term{]}. However, as
  all of the top candidates 2018 election were either Democrats or
  Republicans, it is safe to ignore third parties/independent candidates
  in our analysis).
\item
  \textbf{Data sources:}

  \begin{itemize}
  \tightlist
  \item
    2018 election: As of writing, the results of at least one
    Congressional district have not yet been finalized; upon the
    certification of all results, the test set data will be compiled
    either from official state election boards or downloaded from other
    academics/media.
  \item
    1980 - 2016 outcomes: Data collected based on official records by
    the \href{http://www.electiondataarchive.org/}{Constituency-Level
    Elections Archive}. Following the modeling plan outlined above, we
    calculated the Democratic share of the two-party vote for each
    district across 19 elections.
  \end{itemize}
\end{itemize}

\textbf{Political Explanatory Variables} - Candidate data * Incumbency
status: \href{https://www.jstor.org/stable/2111475}{Much research in
political science} has shown the large positive effect on a candidate's
chances of being elected if she is the current holder of the seat (the
incumbent). Taking this into account, we create a binary variable for
whether the incumbent is running in the election. Next, we combine this
binary variable with another that indicates whether the incumbent is a
Democrat or Republican, forming an interaction term. When the
interaction term indicates that there is a Democratic incumbent running
for re-election, we expect predicted Democratic vote share to be higher.
When there is a Republican incumbent running for re-election, we expect
Democratic vote share to be lower. * Ideological position(s): Political
scientists have developed techniques to estimate the ideological
position of elected representatives, especially those in Congress.
\href{https://voteview.com/about}{Poole and Rosenthal} have developed
DW-NOMINATE (Dynamic Weighted NOMINAl Three-step Estimation) scores,
which are an aggregate measure of a Congressmember's lifetime public
voting record in office over two dimensions, which broadly reflect
differences in preferences on economic and social policy. We also
include the
\href{https://onlinelibrary.wiley.com/doi/abs/10.3162/036298004X201294}{Nokken-Poole
score}, which does not make assumptions about ideological stability in
members of Congress over time, allowing for more fluctuations within the
same legislator over time. Both measures provide for different
understandings of the ideology of the incumbent (essentially, how long a
memory constituents have); thus, we include both in our dataset.

\begin{itemize}
\tightlist
\item
  Contextual data

  \begin{itemize}
  \tightlist
  \item
    District prior vote share: For each district, we have a long record
    of voting. It is likely the case that a district's partisanship, as
    measured by its most recent vote results, predicts the next future
    results very well. However, politics is cyclical and all data is
    subject to random variation. Thus, we include results from multiple
    years prior to 2018 to train the model. A potential issue with this
    is the changing nature of districts over time due to redrawing of
    district boundaries (redistricting). In the next Milestone, we will
    have a systematic method to deal with redistricting, based on
    weighting results from districts that once composed the current
    district.
  \end{itemize}
\end{itemize}

\textbf{Socio-economic Data}

In the next Milestone, we present data from the
\href{census.gov}{American Community Survey}. There, we obtain variables
on median district age, unemployment rate, household income, educational
attainment, and racial/ethnic backgrounds. Regression results using
these covariates are not presented at this stage; however, summary
statistics are, and these variables will be incorporated in the final
model to maximize predictive power.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}307}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
          \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
          \PY{k+kn}{import} \PY{n+nn}{re}
          \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
          \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
          \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{LogisticRegression}
          \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cross\PYZus{}validation} \PY{k}{import} \PY{n}{train\PYZus{}test\PYZus{}split}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/anaconda3/lib/python3.6/site-packages/sklearn/cross\_validation.py:41: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model\_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}212}]:} \PY{n}{data\PYZus{}folder} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{https://raw.githubusercontent.com/cdriscoll92/CS\PYZhy{}109A\PYZhy{}Final\PYZhy{}Project/master/data/}\PY{l+s+s2}{\PYZdq{}}
          \PY{c+c1}{\PYZsh{} local\PYZus{}data\PYZus{}folder = \PYZsq{}/Users/poojatyagi/Dropbox (MIT)/CS 109A Final project/Data\PYZsq{}}
          \PY{n}{local\PYZus{}data\PYZus{}folder} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{/Users/colleendriscoll/Dropbox/Classes/CS 109A/CS 109A Final project/data/}\PY{l+s+s2}{\PYZdq{}}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Reading in state abbreviations file to get the correct district ID columns}
         \PY{n}{state\PYZus{}abbs} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{state\PYZus{}abbreviations\PYZus{}correspondence\PYZus{}table.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    Reading in and cleaning data from the
\href{http://www.electiondataarchive.org/}{Constituency-Level Elections
Archive}:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{k}{def} \PY{n+nf}{clea\PYZus{}clean}\PY{p}{(}\PY{n}{clea\PYZus{}file\PYZus{}name}\PY{p}{,} \PY{n}{state\PYZus{}abb\PYZus{}df}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{}\PYZsh{} Read in data}
            \PY{n}{clea\PYZus{}results} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{clea\PYZus{}file\PYZus{}name}\PY{p}{)}
            \PY{n}{democrat\PYZus{}code} \PY{o}{=} \PY{l+m+mi}{180}
            \PY{n}{republican\PYZus{}code} \PY{o}{=} \PY{l+m+mi}{583}
            \PY{n}{election\PYZus{}month\PYZus{}int} \PY{o}{=} \PY{l+m+mi}{11}
            
            \PY{c+c1}{\PYZsh{}\PYZsh{} Subsetting to only Democrats and Republicans}
            \PY{n}{clea\PYZus{}results} \PY{o}{=} \PY{n}{clea\PYZus{}results}\PY{p}{[}\PY{p}{(}\PY{n}{clea\PYZus{}results}\PY{o}{.}\PY{n}{pty} \PY{o}{==} \PY{n}{democrat\PYZus{}code}\PY{p}{)} \PY{o}{|} 
                                        \PY{p}{(}\PY{n}{clea\PYZus{}results}\PY{o}{.}\PY{n}{pty} \PY{o}{==} \PY{n}{republican\PYZus{}code}\PY{p}{)}\PY{p}{]}
            \PY{c+c1}{\PYZsh{}\PYZsh{} Only general elections (November)}
            \PY{n}{clea\PYZus{}results} \PY{o}{=} \PY{n}{clea\PYZus{}results}\PY{p}{[}\PY{n}{clea\PYZus{}results}\PY{o}{.}\PY{n}{mn} \PY{o}{==} \PY{n}{election\PYZus{}month\PYZus{}int}\PY{p}{]}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Extracting district number from constituency name}
            \PY{c+c1}{\PYZsh{}\PYZsh{} There are some states with only one district that then don\PYZsq{}t }
            \PY{c+c1}{\PYZsh{}\PYZsh{} have a district number listed \PYZhy{}\PYZhy{} therefore filling those NAs with 1s}
            \PY{n}{clea\PYZus{}results}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{clea\PYZus{}results}\PY{o}{.}\PY{n}{cst\PYZus{}n}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{findall}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PYZbs{}
            \PY{n+nb}{str}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{fillna}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}\PYZsh{} Lowercase state name to match CLEA listing}
            \PY{n}{state\PYZus{}abb\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}name\PYZus{}lower}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{state\PYZus{}abb\PYZus{}df}\PY{o}{.}\PY{n}{state\PYZus{}name}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Merging CLEA with state abbrevation correspondence table}
            \PY{n}{clea\PYZus{}merged} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{clea\PYZus{}results}\PY{p}{,} \PY{n}{state\PYZus{}abb\PYZus{}df}\PY{p}{,}
                                      \PY{n}{how} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                      \PY{n}{left\PYZus{}on} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sub}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                      \PY{n}{right\PYZus{}on} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}name\PYZus{}lower}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}\PYZsh{} Creating distict ID variable to merge on later}
            \PY{n}{clea\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{clea\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}abb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZus{}}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PYZbs{}
            \PY{n}{clea\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{str}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Grouping CLEA by district\PYZhy{}year to get the democratic share of the }
            \PY{c+c1}{\PYZsh{}\PYZsh{} two\PYZhy{}party vote}
            \PY{n}{grouped} \PY{o}{=} \PY{n}{clea\PYZus{}merged}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
        
            \PY{n}{years} \PY{o}{=} \PY{p}{[}\PY{p}{]}
            \PY{n}{dist\PYZus{}ids} \PY{o}{=} \PY{p}{[}\PY{p}{]}
            \PY{n}{dem\PYZus{}shares} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        
            \PY{k}{for} \PY{n}{name}\PY{p}{,} \PY{n}{group} \PY{o+ow}{in} \PY{n}{grouped}\PY{p}{:}
                \PY{n}{dem\PYZus{}share} \PY{o}{=} \PY{l+m+mi}{0}
                \PY{n}{years}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{group}\PY{o}{.}\PY{n}{yr}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
                \PY{n}{dist\PYZus{}ids}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{group}\PY{o}{.}\PY{n}{dist\PYZus{}id}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        
                \PY{k}{if} \PY{n}{democrat\PYZus{}code} \PY{o+ow}{in} \PY{n}{group}\PY{o}{.}\PY{n}{pty}\PY{o}{.}\PY{n}{values}\PY{p}{:} \PY{c+c1}{\PYZsh{}\PYZsh{} If a Democrat ran}
                    \PY{n}{total\PYZus{}votes} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{group}\PY{o}{.}\PY{n}{cv1}\PY{o}{.}\PY{n}{values}\PY{p}{)}
                    \PY{n}{dem\PYZus{}votes} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{group}\PY{o}{.}\PY{n}{cv1}\PY{p}{[}\PY{n}{group}\PY{o}{.}\PY{n}{pty} \PY{o}{==} \PY{n}{democrat\PYZus{}code}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
                    \PY{n}{dem\PYZus{}share} \PY{o}{=} \PY{n}{dem\PYZus{}votes}\PY{o}{/}\PY{n}{total\PYZus{}votes}
                \PY{n}{dem\PYZus{}shares}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{dem\PYZus{}share}\PY{p}{)}
            
            \PY{n}{dem\PYZus{}vote\PYZus{}share\PYZus{}dict} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{years}\PY{p}{,}
                               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{dist\PYZus{}ids}\PY{p}{,}
                               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}vote\PYZus{}share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{dem\PYZus{}shares}
                              \PY{p}{\PYZcb{}}
            \PY{n}{dem\PYZus{}vote\PYZus{}share} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{dem\PYZus{}vote\PYZus{}share\PYZus{}dict}\PY{p}{)}
            
            \PY{k}{return} \PY{n}{dem\PYZus{}vote\PYZus{}share}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}321}]:} \PY{n}{clea\PYZus{}cleaned} \PY{o}{=} \PY{n}{clea\PYZus{}clean}\PY{p}{(}\PY{n}{data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{election\PYZus{}results/clea\PYZus{}20180507.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                                    \PY{n}{state\PYZus{}abbs}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}322}]:} \PY{n}{results\PYZus{}2016} \PY{o}{=} \PY{n}{clea\PYZus{}cleaned}\PY{p}{[}\PY{n}{clea\PYZus{}cleaned}\PY{o}{.}\PY{n}{year} \PY{o}{==} \PY{l+m+mi}{2016}\PY{p}{]}
          \PY{n}{results\PYZus{}2016} \PY{o}{=} \PY{n}{results\PYZus{}2016}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}vote\PYZus{}share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}327}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} If Democratic vote share is \PYZgt{}0.50, the Democrat won; else}
          \PY{c+c1}{\PYZsh{}\PYZsh{} the Republican did}
          \PY{n}{results\PYZus{}2016}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}won\PYZus{}2016}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{n}{results\PYZus{}2016}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
          \PY{n}{results\PYZus{}2016}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}vote\PYZus{}share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}328}]:} \PY{n}{results\PYZus{}2016}\PY{p}{[}\PY{l+m+mi}{20}\PY{p}{:}\PY{l+m+mi}{25}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}328}]:}     dist\_id  dem\_won\_2016
          353    AZ\_9           1.0
          372    CA\_1           0.0
          391   CA\_10           0.0
          410   CA\_11           1.0
          429   CA\_12           1.0
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}329}]:} \PY{n}{clea\PYZus{}cleaned} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{clea\PYZus{}cleaned}\PY{p}{,} \PY{n}{results\PYZus{}2016}\PY{p}{,}
                                 \PY{n}{on} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dist\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{how} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    NOMINATE Data summary

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{k}{def} \PY{n+nf}{drop\PYZus{}secondary\PYZus{}members}\PY{p}{(}\PY{n}{nominate\PYZus{}df}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{}\PYZsh{} Districts where there was more than one member of Congress serving, }
            \PY{c+c1}{\PYZsh{}\PYZsh{} assign the one who voted the most number of times to the district}
            \PY{n}{multiple\PYZus{}member\PYZus{}districts} \PY{o}{=} \PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{dist\PYZus{}id}\PYZbs{}
            \PY{p}{[}\PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{dist\PYZus{}id}\PY{o}{.}\PY{n}{duplicated}\PY{p}{(}\PY{p}{)}\PY{p}{]}
            
            \PY{n}{nominate\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{main\PYZus{}member}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
            \PY{k}{for} \PY{n}{district} \PY{o+ow}{in} \PY{n}{multiple\PYZus{}member\PYZus{}districts}\PY{p}{:}
                \PY{n}{member\PYZus{}votes} \PY{o}{=} \PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{nominate\PYZus{}number\PYZus{}of\PYZus{}votes}\PYZbs{}
                \PY{p}{[}\PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{dist\PYZus{}id} \PY{o}{==} \PY{n}{district}\PY{p}{]}
        
                \PY{n}{orders} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{member\PYZus{}votes}\PY{p}{)}
        
                \PY{n}{lowest\PYZus{}score\PYZus{}index} \PY{o}{=} \PY{n}{nominate\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{main\PYZus{}member}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PYZbs{}
                \PY{p}{[}\PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{dist\PYZus{}id} \PY{o}{==} \PY{n}{district}\PY{p}{]}\PY{p}{[}\PY{n}{orders} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{index}
        
                \PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{lowest\PYZus{}score\PYZus{}index}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{main\PYZus{}member}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Only keeping the main member in each district}
            \PY{n}{nominate\PYZus{}df} \PY{o}{=} \PY{n}{nominate\PYZus{}df}\PY{p}{[}\PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{main\PYZus{}member} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{]}
            \PY{n}{nominate\PYZus{}df}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{main\PYZus{}member}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
        
            \PY{k}{return} \PY{n}{nominate\PYZus{}df}
        
        \PY{k}{def} \PY{n+nf}{nom\PYZus{}scores\PYZus{}clean}\PY{p}{(}\PY{n}{nom\PYZus{}file\PYZus{}name}\PY{p}{,} \PY{n}{cols\PYZus{}keep}\PY{p}{)}\PY{p}{:}
            \PY{n}{nominate\PYZus{}scores} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{nom\PYZus{}file\PYZus{}name}\PY{p}{)}
            \PY{n}{nominate\PYZus{}scores} \PY{o}{=} \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{n}{cols\PYZus{}keep}\PY{p}{]}
            
            \PY{c+c1}{\PYZsh{}\PYZsh{} Dropping president}
            \PY{n}{nominate\PYZus{}scores} \PY{o}{=} \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}abbrev}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PYZbs{}
                                              \PY{o}{!=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{USA}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Dropping members who didn\PYZsq{}t vote (they can\PYZsq{}t provide ideology measures then)}
            \PY{n}{missing\PYZus{}vote\PYZus{}num\PYZus{}indices} \PY{o}{=} \PY{n}{nominate\PYZus{}scores}\PY{o}{.}\PY{n}{nominate\PYZus{}number\PYZus{}of\PYZus{}votes}\PY{o}{.}\PY{n}{isna}\PY{p}{(}\PY{p}{)}\PYZbs{}
            \PY{o}{==} \PY{k+kc}{True}
            \PY{n}{nominate\PYZus{}scores} \PY{o}{=} \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{o}{\PYZti{}}\PY{n}{missing\PYZus{}vote\PYZus{}num\PYZus{}indices}\PY{p}{]}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} District ID column}
            \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{nominate\PYZus{}scores}\PY{o}{.}\PY{n}{state\PYZus{}abbrev} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PYZbs{}
            \PY{n}{nominate\PYZus{}scores}\PY{o}{.}\PY{n}{district\PYZus{}code}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{str}\PY{p}{)}
        
            \PY{n}{nominate\PYZus{}scores} \PY{o}{=} \PY{n}{drop\PYZus{}secondary\PYZus{}members}\PY{p}{(}\PY{n}{nominate\PYZus{}scores}\PY{p}{)}
        
            \PY{n}{nominate\PYZus{}scores}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nominate\PYZus{}number\PYZus{}of\PYZus{}votes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,}
                                \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{}\PYZsh{} Election year during which this Congress was in session (not the one that}
            \PY{c+c1}{\PYZsh{}\PYZsh{} produced this Congress!)}
            \PY{n}{session\PYZus{}length} \PY{o}{=} \PY{l+m+mi}{2}
            \PY{n}{congress\PYZus{}start\PYZus{}year} \PY{o}{=} \PY{l+m+mi}{1788}
            \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{congress\PYZus{}start\PYZus{}year} \PY{o}{+} \PY{n}{session\PYZus{}length}\PY{o}{*}\PYZbs{}
            \PY{n}{nominate\PYZus{}scores}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{congress}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        
            \PY{k}{return} \PY{n}{nominate\PYZus{}scores}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n}{session\PYZus{}nums} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{096}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{097}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{098}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{099}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{100}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{101}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{102}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{103}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{104}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{105}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{106}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{107}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{108}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{109}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{110}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{111}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{112}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{113}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{114}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{115}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        
        \PY{n}{nominate\PYZus{}csvs} \PY{o}{=} \PY{p}{[}\PY{n}{data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{nominate\PYZus{}scores/H}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{x} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZus{}members.csv}\PY{l+s+s2}{\PYZdq{}} \PYZbs{}
                         \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{session\PYZus{}nums}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{n}{nom\PYZus{}cols\PYZus{}keep} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{congress}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{icpsr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{district\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}abbrev}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{party\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bioname}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{born}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nominate\PYZus{}dim1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nominate\PYZus{}dim2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nominate\PYZus{}number\PYZus{}of\PYZus{}votes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nokken\PYZus{}poole\PYZus{}dim1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nokken\PYZus{}poole\PYZus{}dim2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{n}{nom\PYZus{}combined} \PY{o}{=} \PY{n}{nom\PYZus{}scores\PYZus{}clean}\PY{p}{(}\PY{n}{nominate\PYZus{}csvs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}
                                        \PY{n}{nom\PYZus{}cols\PYZus{}keep}\PY{p}{)}
        
        \PY{k}{for} \PY{n}{file\PYZus{}path} \PY{o+ow}{in} \PY{n}{nominate\PYZus{}csvs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{:}
            \PY{n}{df} \PY{o}{=} \PY{n}{nom\PYZus{}scores\PYZus{}clean}\PY{p}{(}\PY{n}{file\PYZus{}path}\PY{p}{,} \PY{n}{nom\PYZus{}cols\PYZus{}keep}\PY{p}{)}
            \PY{n}{nom\PYZus{}combined} \PY{o}{=} \PY{n}{nom\PYZus{}combined}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{ignore\PYZus{}index} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
            
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py:3694: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html\#indexing-view-versus-copy
  errors=errors)

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}332}]:} \PY{n}{merged\PYZus{}elections\PYZus{}ideology} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{clea\PYZus{}cleaned}\PY{p}{,} \PY{n}{nom\PYZus{}combined}\PY{p}{,} \PY{n}{how} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} 
                                               \PY{n}{on} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{year}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dist\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
          \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PYZbs{}
          \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{born}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{district\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}abbrev}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bioname}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{born}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                                         \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}333}]:} \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{p}{[}\PY{l+m+mi}{2000}\PY{p}{:}\PY{l+m+mi}{2005}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}333}]:}       year dist\_id  dem\_vote\_share  dem\_won\_2016  congress    icpsr  \textbackslash{}
          2000  2014    GA\_1        0.390865           0.0     113.0  29338.0   
          2001  2016    GA\_1        0.000000           0.0     114.0  21513.0   
          2002  1980   GA\_10        0.802200           0.0      96.0  14404.0   
          2003  1982   GA\_10        1.000000           0.0      97.0  14404.0   
          2004  1984   GA\_10        1.000000           0.0      98.0  14404.0   
          
                party\_code  nominate\_dim1  nominate\_dim2  nokken\_poole\_dim1  \textbackslash{}
          2000       200.0          0.540          0.302              0.690   
          2001       200.0          0.572          0.370              0.551   
          2002       100.0         -0.028          0.639             -0.063   
          2003       100.0         -0.028          0.639             -0.025   
          2004       100.0         -0.028          0.639             -0.003   
          
                nokken\_poole\_dim2   age  
          2000             -0.059  59.0  
          2001              0.272  59.0  
          2002              0.675  58.0  
          2003              0.838  60.0  
          2004              0.631  62.0  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}249}]:} \PY{n}{col\PYZus{}n}\PY{p}{,} \PY{n}{row\PYZus{}n} \PY{o}{=} \PY{l+m+mi}{4}\PY{p}{,}\PY{l+m+mi}{5}
          
          \PY{n}{fig}\PY{p}{,} \PY{n}{ax}  \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{n}{row\PYZus{}n}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{n}{col\PYZus{}n}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{5}\PY{o}{*}\PY{n}{col\PYZus{}n}\PY{p}{,}\PY{l+m+mi}{5}\PY{o}{*}\PY{n}{row\PYZus{}n}\PY{p}{)}\PY{p}{)}
          \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Histogram of Democratic Share of Two\PYZhy{}Party Vote, 1980 \PYZhy{} 2016}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                      \PY{n}{y} \PY{o}{=} \PY{l+m+mf}{1.03}\PY{p}{)}
          \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{year} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{o}{.}\PY{n}{year}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              \PY{n}{histogram\PYZus{}values} \PY{o}{=} \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PY{p}{[}
                  \PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{o}{.}\PY{n}{year} \PY{o}{==} \PY{n}{year}\PY{p}{]}\PY{o}{.}\PY{n}{values}
              \PY{n}{republican\PYZus{}winners} \PY{o}{=} \PY{p}{[}\PY{n}{x} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{histogram\PYZus{}values} \PY{k}{if} \PY{n}{x} \PY{o}{\PYZlt{}} \PY{l+m+mf}{0.5}\PY{p}{]}
              \PY{n}{democrat\PYZus{}winners} \PY{o}{=} \PY{p}{[}\PY{n}{x} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{histogram\PYZus{}values} \PY{k}{if} \PY{n}{x} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{]}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{republican\PYZus{}winners}\PY{p}{,} \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{red}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                                     \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Rep. winner}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{democrat\PYZus{}winners}\PY{p}{,} \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{blue}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                                     \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Dem. winner}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{70}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{year}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Democratic Share of the Two\PYZhy{}Party Vote}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Count}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{i} \PY{o}{\PYZpc{}} \PY{l+m+mi}{4}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_19_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Above, we see the proportion of votes given to the Democratic candidate
in each district since 1980. If the Democratic share of the vote is over
50\%, then by American electoral rules, the Democrat wins the election
(blue shaded bars). If the Democratic share of the vote is below 50\%,
then the Republican share is over 50\%, given the American two-party
system, so the Republican candidate wins.

One striking element of the figure above is the number of extreme values
at 0 and 1, which indicate candidates that run unopposed. The number of
candidates that ran unopposed seems to be highest between 1998 and 2004,
although has remained high over the range of years available. Obviously,
if a candidate runs unopposed, predicting the outcome is trivial.

Finally, the margins of victory are worth noting. While many margins of
victory were small in 1980 (there are many observations in the range
(0.4, 0.6), 2004 provides an example of well-divided elections, whose
result was very clear. That said, there does not appear to be a pattern
in when the results will be well-separated across the two parties; such
distinctions could be made through more thorough analysis of more
covariates.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{n}{ntl\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{national\PYZus{}government\PYZus{}makeup.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{ntl\PYZus{}df} \PY{o}{=} \PY{n}{ntl\PYZus{}df}\PY{p}{[}\PY{n}{ntl\PYZus{}df}\PY{o}{.}\PY{n}{year} \PY{o}{\PYZlt{}} \PY{l+m+mi}{2018}\PY{p}{]} \PY{c+c1}{\PYZsh{}\PYZsh{} Dropping 2018 results}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}95}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Years in which there was a Republican/Democratic President}
         \PY{n}{R\PYZus{}pres\PYZus{}year\PYZus{}ranges} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+m+mf}{1980.1}\PY{p}{,}\PY{l+m+mi}{1992}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{2000.1}\PY{p}{,} \PY{l+m+mi}{2008}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{2016.1}\PY{p}{,} \PY{l+m+mi}{2018}\PY{p}{]}\PY{p}{]}
         \PY{n}{D\PYZus{}pres\PYZus{}year\PYZus{}ranges} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+m+mi}{1978}\PY{p}{,} \PY{l+m+mi}{1980}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{1992.1}\PY{p}{,}\PY{l+m+mi}{2000}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{2008.1}\PY{p}{,} \PY{l+m+mi}{2016}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}102}]:} \PY{n}{year\PYZus{}low}\PY{p}{,} \PY{n}{year\PYZus{}high} \PY{o}{=} \PY{l+m+mi}{1980}\PY{p}{,} \PY{l+m+mi}{2018}
          \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n}{year\PYZus{}low}\PY{p}{,} \PY{n}{year\PYZus{}high}\PY{o}{+}\PY{l+m+mi}{2}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
          
          \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{ntl\PYZus{}df}\PY{o}{.}\PY{n}{year}\PY{o}{.}\PY{n}{values}\PY{p}{,}\PY{n}{ntl\PYZus{}df}\PY{o}{.}\PY{n}{house}\PY{o}{.}\PY{n}{values}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{o\PYZhy{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                 \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{black}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                 \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Percent Ds in House}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{black}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{linestyle} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZhy{}\PYZhy{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlim}\PY{p}{(}\PY{n}{year\PYZus{}low}\PY{o}{\PYZhy{}}\PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{year\PYZus{}high}\PY{o}{+}\PY{l+m+mf}{0.5}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{l+m+mf}{0.4}\PY{p}{,} \PY{l+m+mf}{0.65}\PY{p}{)}
          \PY{c+c1}{\PYZsh{}\PYZsh{} Republican presidents}
          \PY{k}{for} \PY{n}{year\PYZus{}range} \PY{o+ow}{in} \PY{n}{R\PYZus{}pres\PYZus{}year\PYZus{}ranges}\PY{p}{:}
              \PY{n}{ax}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{l+m+mf}{0.7}\PY{p}{,} \PY{n}{where} \PY{o}{=} \PY{p}{(}\PY{n}{x} \PY{o}{\PYZgt{}} \PY{n}{year\PYZus{}range}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZam{}}
                              \PY{p}{(}\PY{n}{x} \PY{o}{\PYZlt{}} \PY{n}{year\PYZus{}range}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}
                              \PY{n}{facecolor} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{red}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                             \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{)}
          \PY{c+c1}{\PYZsh{}\PYZsh{} Democrat presidents}
          \PY{k}{for} \PY{n}{year\PYZus{}range} \PY{o+ow}{in} \PY{n}{D\PYZus{}pres\PYZus{}year\PYZus{}ranges}\PY{p}{:}
              \PY{n}{ax}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{l+m+mf}{0.7}\PY{p}{,} \PY{n}{where} \PY{o}{=} \PY{p}{(}\PY{n}{x} \PY{o}{\PYZgt{}} \PY{n}{year\PYZus{}range}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZam{}}
                              \PY{p}{(}\PY{n}{x} \PY{o}{\PYZlt{}} \PY{n}{year\PYZus{}range}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}
                              \PY{n}{facecolor} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{royalblue}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                             \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{n}{facecolor} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{royalblue}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha} \PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{,}
                         \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Dem. President}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{n}{facecolor} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{red}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha} \PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{,}
                         \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Rep. President}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Democrat Seat Share in U.S. House}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{By Party of President}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Year}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Democrat Seat Share}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_23_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Above, we see the percent seats held by Democrats in the House over time
and under Presidents from different parties. This plot shows the midterm
advantage enjoyed by the non-presidential party in American politics
-\/- at midterm elections (two years after the President was
(re)elected), voters tend to support the party in opposition. This is
seen in the graph above by steep drop-offs in the proportion of House
seats held be Democrats 1994-1996 and 2008-2010. Additionally,
Republicans lost a large share of seats 1982-1984 and 2006-2008.

In terms of modeling, this suggests that we should include a dummy
variable indicating whether the election was a Presidential or midterm
election. Given that the 2018 election is a midterm election under a
Republican President, we expect the Democratic Party (the opposition
party) to gain seats this election.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}220}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Getting csv files on socioeconomic data}
          \PY{c+c1}{\PYZsh{}state\PYZus{}csv\PYZus{}files = os.listdir(local\PYZus{}data\PYZus{}folder + \PYZdq{}Socio\PYZhy{}economicData/2018\PYZdq{})}
          \PY{n}{state\PYZus{}csv\PYZus{}files} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{listdir}\PY{p}{(}\PY{n}{local\PYZus{}data\PYZus{}folder}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Socio\PYZhy{}economicData/2018/}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{state\PYZus{}csv\PYZus{}files} \PY{o}{=} \PY{p}{[}\PY{n}{x} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{state\PYZus{}csv\PYZus{}files} \PY{k}{if} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{csv}\PY{l+s+s2}{\PYZdq{}} \PY{o+ow}{in} \PY{n}{x}\PY{p}{]}
          \PY{n}{socioeconomic\PYZus{}file\PYZus{}paths} \PY{o}{=} \PY{p}{[}\PY{n}{local\PYZus{}data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Socio\PYZhy{}economicData/2018/}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{x} \PYZbs{}
                                      \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{state\PYZus{}csv\PYZus{}files}\PY{p}{]}
          
          \PY{n+nb}{len}\PY{p}{(}\PY{n}{socioeconomic\PYZus{}file\PYZus{}paths}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}220}]:} 50
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}221}]:} \PY{c+c1}{\PYZsh{}index of data in CSV}
          \PY{n}{medage\PYZus{}index}\PY{o}{=}\PY{l+m+mi}{16}
          \PY{n}{unemprate\PYZus{}index}\PY{o}{=}\PY{l+m+mi}{96}
          \PY{n}{medhhincome\PYZus{}index}\PY{o}{=}\PY{l+m+mi}{198}
          \PY{n}{bachdeg\PYZus{}index}\PY{o}{=}\PY{l+m+mi}{240}
          \PY{n}{totpop\PYZus{}index} \PY{o}{=} \PY{l+m+mi}{19}
          \PY{n}{black\PYZus{}index} \PY{o}{=} \PY{l+m+mi}{22}
          \PY{n}{asian\PYZus{}index} \PY{o}{=} \PY{l+m+mi}{24}
          \PY{n}{hispanic\PYZus{}index} \PY{o}{=} \PY{l+m+mi}{29}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}226}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Dictionary to hold data from districts}
          \PY{n}{data\PYZus{}dict} \PY{o}{=} \PY{p}{\PYZob{}}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{district\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median\PYZus{}age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{unemp\PYZus{}rate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median\PYZus{}HH\PYZus{}income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bachelor\PYZus{}deg\PYZus{}perc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{asian\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}\PY{p}{,}
          \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hispanic\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{p}{]}
          \PY{p}{\PYZcb{}}
          
          \PY{k}{for} \PY{n}{csv\PYZus{}end} \PY{o+ow}{in} \PY{n}{state\PYZus{}csv\PYZus{}files}\PY{p}{:}
              \PY{n}{full\PYZus{}file\PYZus{}path} \PY{o}{=} \PY{n}{local\PYZus{}data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Socio\PYZhy{}economicData/2018/}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n}{csv\PYZus{}end}
              
              \PY{n}{state\PYZus{}name} \PY{o}{=} \PY{n}{csv\PYZus{}end}\PY{o}{.}\PY{n}{partition}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZus{}District}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
              
              \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{full\PYZus{}file\PYZus{}path}\PY{p}{)}
              \PY{n}{data\PYZus{}columns} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
          
              \PY{c+c1}{\PYZsh{}\PYZsh{} Getting variables of interest from each data frame}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median\PYZus{}age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{medage\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{unemp\PYZus{}rate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{unemprate\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)} 
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median\PYZus{}HH\PYZus{}income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{medhhincome\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)} 
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bachelor\PYZus{}deg\PYZus{}perc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{bachdeg\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{totpop\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)} 
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{black\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{asian\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{asian\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hispanic\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{hispanic\PYZus{}index}\PY{p}{,}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)} 
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{p}{[}\PY{n}{state\PYZus{}name} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{data\PYZus{}columns}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
              
              \PY{n}{district\PYZus{}names} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{p}{[}\PY{n}{data\PYZus{}columns}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
              \PY{n}{data\PYZus{}dict}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{district\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{data\PYZus{}columns}\PY{p}{)}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
          
          \PY{n}{SE\PYZus{}data\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{data\PYZus{}dict}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}227}]:} \PY{n}{state\PYZus{}abbs}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}227}]:}    state\_name state\_abb state\_name\_lower
          0     Alabama        AL          alabama
          1      Alaska        AK           alaska
          2     Arizona        AZ          arizona
          3    Arkansas        AR         arkansas
          4  California        CA       california
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}228}]:} \PY{n}{SE\PYZus{}data\PYZus{}merged} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{SE\PYZus{}data\PYZus{}df}\PY{p}{,} \PY{n}{state\PYZus{}abbs}\PY{p}{,} \PY{n}{how} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                                    \PY{n}{on} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{state\PYZus{}name}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state\PYZus{}abb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZus{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PYZbs{}
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{district\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{str}\PY{p}{)}
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}228}]:}   state\_name  district\_num median\_age unemp\_rate median\_HH\_income  \textbackslash{}
          0    Alabama             1       40.0        5.8            47984   
          1    Alabama             2       38.5        6.2            46579   
          2    Alabama             3       38.1        5.3            46484   
          3    Alabama             4       40.7        6.0            43218   
          4    Alabama             5       39.5        4.7            54707   
          
            bachelor\_deg\_perc total\_pop black\_pop asian\_pop hispanic\_pop state\_abb  \textbackslash{}
          0              25.0    713410    198799     10717        21976        AL   
          1              23.1    673776    207087      7686        24457        AL   
          2              21.7    710488    187176     11727        20464        AL   
          3              17.9    685553     49177      3863        45965        AL   
          4              31.9    718713    129234     12993        37350        AL   
          
            state\_name\_lower dist\_id  
          0          alabama    AL\_1  
          1          alabama    AL\_2  
          2          alabama    AL\_3  
          3          alabama    AL\_4  
          4          alabama    AL\_5  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}237}]:} \PY{n}{population\PYZus{}columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{total\PYZus{}pop}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{black\PYZus{}pop}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{asian\PYZus{}pop}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{hispanic\PYZus{}pop}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
          \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{population\PYZus{}columns}\PY{p}{:}
              \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{n}{col}\PY{p}{]} \PY{o}{=} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{float}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}230}]:} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black\PYZus{}perc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{/}\PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{asian\PYZus{}perc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{asian\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{/}\PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hispanic\PYZus{}perc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hispanic\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{/}\PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    Below, we see histograms of demographic predictors in 2017 -\/-
interestingly, we see slight right-skewed distributions in all of these
variables, except for median age, potentially. This indicates that we
might need to transform our variables (especially racial/ethnic
variables, which appear most skewed) to help ensure that our errors are
normally distributed and that our models are not overly influenced by
outliers.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}245}]:} \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{3}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{3}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{ax}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
          \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Distribution of predictors across 435 districts (2017)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+m+mf}{1.03}\PY{p}{)}
          \PY{n}{labels}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Median Age (yrs)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Unemployment Rate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Median Household Income (X1000 \PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{ with bachelors degree}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{ Black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{ Asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{ Hispanic}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
          \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{col\PYZus{}i} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{,} \PY{l+m+mi}{3}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{,} \PY{l+m+mi}{13}\PY{p}{,} \PY{l+m+mi}{14}\PY{p}{,} \PY{l+m+mi}{15}\PY{p}{]}\PY{p}{)}\PY{p}{:}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{n}{col\PYZus{}i}\PY{p}{]}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{float}\PY{p}{)}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{District Count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{n}{labels}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
              
          \PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_33_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}256}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} This data applies for the 2018 election (it is the most recent)}
          
          \PY{n}{SE\PYZus{}data\PYZus{}merged}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{2018}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}259}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Merging in current socioeconomic data \PYZhy{}\PYZhy{} will do }
          \PY{c+c1}{\PYZsh{}\PYZsh{} when we have more data than 2018}
          \PY{c+c1}{\PYZsh{} combined\PYZus{}data = pd.merge(merged\PYZus{}elections\PYZus{}ideology, }
          \PY{c+c1}{\PYZsh{}                         SE\PYZus{}data\PYZus{}merged,}
          \PY{c+c1}{\PYZsh{}                         on = [\PYZdq{}dist\PYZus{}id\PYZdq{}, \PYZdq{}year\PYZdq{}],}
          \PY{c+c1}{\PYZsh{}                         how = \PYZdq{}left\PYZdq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}378}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Data for 2005 \PYZhy{} 2017}
          \PY{n}{unemp\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{local\PYZus{}data\PYZus{}folder} \PY{o}{+} 
                                 \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{congressional\PYZus{}district\PYZus{}unemployment\PYZus{}2005\PYZhy{}2017.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}255}]:} \PY{n}{unemp\PYZus{}df}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}255}]:}   dist\_id  year  unemployment
          0    AL\_1  2005           6.3
          1    AL\_2  2005           6.7
          2    AL\_3  2005           8.8
          3    AL\_4  2005           6.9
          4    AL\_5  2005           7.0
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}334}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Merging in unemployment data}
          \PY{n}{combined\PYZus{}data} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{merged\PYZus{}elections\PYZus{}ideology}\PY{p}{,} 
                                  \PY{n}{unemp\PYZus{}df}\PY{p}{,}
                                  \PY{n}{on} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dist\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{year}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
                                  \PY{n}{how} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{combined\PYZus{}data}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{n}{inplace} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}335}]:} \PY{n}{combined\PYZus{}data}\PY{p}{[}\PY{l+m+mi}{10}\PY{p}{:}\PY{l+m+mi}{15}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}335}]:}     year dist\_id  dem\_vote\_share  dem\_won\_2016  congress    icpsr  party\_code  \textbackslash{}
          10  2000    AK\_1        0.192064           0.0     106.0  14066.0       200.0   
          11  2002    AK\_1        0.188273           0.0     107.0  14066.0       200.0   
          12  2004    AK\_1        0.239302           0.0     108.0  14066.0       200.0   
          13  2006    AK\_1        0.414254           0.0     109.0  14066.0       200.0   
          16  2008    AK\_1        0.472837           0.0     110.0  14066.0       200.0   
          
              nominate\_dim1  nominate\_dim2  nokken\_poole\_dim1  nokken\_poole\_dim2   age  \textbackslash{}
          10          0.279          0.014              0.295              0.181  67.0   
          11          0.279          0.014              0.383              0.215  69.0   
          12          0.279          0.014              0.353              0.142  71.0   
          13          0.279          0.014              0.367             -0.047  73.0   
          16          0.279          0.014              0.291              0.269  75.0   
          
              unemployment  
          10           NaN  
          11           NaN  
          12           NaN  
          13           9.4  
          16           7.7  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}336}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Dropping some columns for the scatter matrix}
          \PY{n}{cols\PYZus{}to\PYZus{}drop\PYZus{}for\PYZus{}scatter} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dist\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{congress}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{icpsr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
          \PY{n}{to\PYZus{}scatter\PYZus{}df} \PY{o}{=} \PY{n}{combined\PYZus{}data}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{cols\PYZus{}to\PYZus{}drop\PYZus{}for\PYZus{}scatter}\PY{p}{,}
                                             \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,}
                                            \PY{n}{inplace} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    Below, we see a scatter matrix for all of the predictors in the dataset.
One interesting aspect of the scatter matrix is that the ideological
measures are split at 0.5 -\/- that is, there are few observations at
the median of the distribution. This may prove problematic, as voting
records are likely highly collinear with the incumbent's party.
Interestingly, however, there is a high level of variance between
ideological scores and the ultimate democratic vote share, indicating
that incumbent ideology is a good, though not perfect, predictor of the
election outcome.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}337}]:} \PY{n}{pd}\PY{o}{.}\PY{n}{plotting}\PY{o}{.}\PY{n}{scatter\PYZus{}matrix}\PY{p}{(}\PY{n}{to\PYZus{}scatter\PYZus{}df}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.2}\PY{p}{,}
                                     \PY{n}{figsize} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{local\PYZus{}data\PYZus{}folder} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scatter\PYZus{}matrix.png}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_42_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}306}]:} \PY{n}{years\PYZus{}no\PYZus{}NA\PYZus{}unemp} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{2006}\PY{p}{,} \PY{l+m+mi}{2017}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
          
          \PY{n}{col\PYZus{}n}\PY{p}{,} \PY{n}{row\PYZus{}n} \PY{o}{=} \PY{l+m+mi}{3}\PY{p}{,} \PY{l+m+mi}{2}
          
          \PY{n}{fig}\PY{p}{,} \PY{n}{ax}  \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{n}{row\PYZus{}n}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{n}{col\PYZus{}n}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{5}\PY{o}{*}\PY{n}{col\PYZus{}n}\PY{p}{,}\PY{l+m+mi}{5}\PY{o}{*}\PY{n}{row\PYZus{}n}\PY{p}{)}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} plt.tight\PYZus{}layout()}
          \PY{n}{ax} \PY{o}{=} \PY{n}{ax}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
          \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Unemployment versus Democratic Vote Share over Time}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{y} \PY{o}{=} \PY{l+m+mf}{0.93}\PY{p}{)}
          \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{year\PYZus{}i} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{years\PYZus{}no\PYZus{}NA\PYZus{}unemp}\PY{p}{)}\PY{p}{:}
              \PY{n}{this\PYZus{}year\PYZus{}df} \PY{o}{=} \PY{n}{combined\PYZus{}data}\PY{p}{[}\PY{n}{combined\PYZus{}data}\PY{o}{.}\PY{n}{year} \PY{o}{==} \PY{n}{year\PYZus{}i}\PY{p}{]}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{this\PYZus{}year\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{unemployment}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                           \PY{n}{this\PYZus{}year\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}vote\PYZus{}share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{o}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{year\PYZus{}i}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlim}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{28}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Democratic Vote Share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{District Unemployment Rate}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
              
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_43_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Interestingly, we see above that the relationship between district-level
unemployment and the percent of the vote that the Democratic candidate
obtains might not be linear. Particularly, when there is greater
variation in unemployment, the apparent relationship between
unemployment and greater success for Democratic candidates is stronger.
We see this in particular in comparing the elections in 2010 and 2016:
in 2010, unemployment surpassed 25\% in two districts, while it was no
higher than 15\% in 2016. These scatterplots suggest that we should
include a measure of variation in nationwide unemployment and the
unemployment rate itself, or that especially high unemployment rates may
be outliers that could bias our results. In any case, care should be
taken with these data.

    Below, we fit a basic logistic model to predict the 2016 election
outcomes (the 2018 outcomes are not yet available in full, as discussed
above). We base this model solely on the election outcomes in the
district since 1980. Impressively, this baseline model already performs
fairly well. However, future models that incorporate more covariates
will likely do better.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}350}]:} \PY{c+c1}{\PYZsh{} Fit logistic regression on training data }
          
          \PY{n}{data\PYZus{}to\PYZus{}fit} \PY{o}{=} \PY{n}{combined\PYZus{}data}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{n}{inplace} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{}\PYZsh{} Can\PYZsq{}t predict 2016 results with 2016 results...}
          \PY{n}{x\PYZus{}train} \PY{o}{=} \PY{n}{data\PYZus{}to\PYZus{}fit}\PY{p}{[}\PY{n}{data\PYZus{}to\PYZus{}fit}\PY{o}{.}\PY{n}{year} \PY{o}{\PYZlt{}} \PY{l+m+mi}{2016}\PY{p}{]}
          \PY{n}{y\PYZus{}train} \PY{o}{=} \PY{n}{x\PYZus{}train}\PY{o}{.}\PY{n}{dem\PYZus{}won\PYZus{}2016}\PY{o}{.}\PY{n}{values}
          
          \PY{n}{logreg1} \PY{o}{=} \PY{n}{LogisticRegression}\PY{p}{(}\PY{n}{C}\PY{o}{=}\PY{l+m+mi}{100000}\PY{p}{)}
          \PY{n}{logreg1}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{x\PYZus{}train}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PY{o}{.}\PY{n}{values}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}
                      \PY{n}{y\PYZus{}train}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}350}]:} LogisticRegression(C=100000, class\_weight=None, dual=False,
                    fit\_intercept=True, intercept\_scaling=1, max\_iter=100,
                    multi\_class='ovr', n\_jobs=1, penalty='l2', random\_state=None,
                    solver='liblinear', tol=0.0001, verbose=0, warm\_start=False)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}361}]:} \PY{c+c1}{\PYZsh{} Make Prediction and check the accuracy}
          \PY{n}{y\PYZus{}train\PYZus{}probs}\PY{o}{=}\PY{p}{(}\PY{n}{logreg1}\PY{o}{.}\PY{n}{predict\PYZus{}proba}\PY{p}{(}\PY{n}{x\PYZus{}train}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PYZbs{}
                                               \PY{o}{.}\PY{n}{values}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{train\PYZus{}accuracy} \PY{o}{=} \PY{n}{logreg1}\PY{o}{.}\PY{n}{score}\PY{p}{(}\PY{n}{x\PYZus{}train}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PYZbs{}
                                         \PY{o}{.}\PY{n}{values}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}
                                      \PY{n}{y\PYZus{}train}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{100}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Accuracy of logistic regression classifier on train set: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{np}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{n}{train\PYZus{}accuracy}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{sep} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Accuracy of logistic regression classifier on train set: 82.83\%

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}376}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} True outcomes:}
          \PY{n}{x\PYZus{}train\PYZus{}true} \PY{o}{=} \PY{n}{data\PYZus{}to\PYZus{}fit}\PY{p}{[}\PY{n}{data\PYZus{}to\PYZus{}fit}\PY{o}{.}\PY{n}{year} \PY{o}{==} \PY{l+m+mi}{2016}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}vote\PYZus{}share}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{values}
          \PY{n}{y\PYZus{}train\PYZus{}true} \PY{o}{=} \PY{n}{data\PYZus{}to\PYZus{}fit}\PY{p}{[}\PY{n}{data\PYZus{}to\PYZus{}fit}\PY{o}{.}\PY{n}{year} \PY{o}{==} \PY{l+m+mi}{2016}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dem\PYZus{}won\PYZus{}2016}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{values}
          
          \PY{c+c1}{\PYZsh{} Plot predicted probabilities}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}train}\PY{o}{.}\PY{n}{dem\PYZus{}vote\PYZus{}share}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                   \PY{n}{y\PYZus{}train\PYZus{}probs}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Training Data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}train\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}train\PYZus{}true}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{*}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{red}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                  \PY{n}{label} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{True 2016 Results}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Former Election Results}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Predicted probability}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Predicted Probabilities of Democrat Winning, 2016}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_48_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
